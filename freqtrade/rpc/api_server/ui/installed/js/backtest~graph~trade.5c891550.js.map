{"version":3,"sources":["webpack:///./src/components/charts/PlotIndicator.vue?db71","webpack:///./src/components/charts/CandleChart.vue?011d","webpack:///./src/components/charts/PlotConfigurator.vue?b99f","webpack:///./src/components/charts/CandleChartContainer.vue?917c","webpack:///./src/components/charts/CandleChart.vue?534b","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./src/shared/randomColor.ts","webpack:///./src/shared/timemath.ts","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack:///./node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","webpack:///./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack:///./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack:///./node_modules/echarts/lib/chart/candlestick/install.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack:///./node_modules/echarts/lib/chart/scatter/install.js","webpack:///./node_modules/echarts/lib/coord/calendar/CalendarModel.js","webpack:///./node_modules/echarts/lib/component/calendar/CalendarView.js","webpack:///./node_modules/echarts/lib/coord/calendar/Calendar.js","webpack:///./node_modules/echarts/lib/component/calendar/install.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineAxis.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/timelineAction.js","webpack:///./node_modules/echarts/lib/component/timeline/preprocessor.js","webpack:///./node_modules/echarts/lib/component/timeline/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./src/components/charts/CandleChart.vue","webpack:///./src/components/charts/CandleChart.vue?a324","webpack:///./src/components/charts/CandleChart.vue?382b","webpack:///./src/components/charts/PlotConfigurator.vue?6a5b","webpack:///./src/components/charts/PlotIndicator.vue?0382","webpack:///./src/components/charts/PlotIndicator.vue","webpack:///./src/components/charts/PlotIndicator.vue?8d9e","webpack:///./src/components/charts/PlotIndicator.vue?97c0","webpack:///./src/components/charts/PlotConfigurator.vue","webpack:///./src/components/charts/PlotConfigurator.vue?630d","webpack:///./src/components/charts/PlotConfigurator.vue?e718","webpack:///./src/components/charts/CandleChartContainer.vue","webpack:///./src/components/charts/CandleChartContainer.vue?26f9","webpack:///./src/components/charts/CandleChartContainer.vue?617d","webpack:///./src/components/charts/CandleChartContainer.vue?b82e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","datasetColumns","model","value","callback","$$v","plotConfig","expression","_e","_v","_s","strategyName","timeframe","availablePairs","on","refresh","pair","dataset","buy_signals","sell_signals","availablePlotConfigNames","plotConfigChanged","plotConfigName","showConfigurator","trades","timezone","getChartTheme","staticStyle","plotConfigModal","directives","name","rawName","staticRenderFns","ref","theme","_typeof","obj","Symbol","iterator","constructor","prototype","Math","random","toString","ROUND_UP","ROUND_DOWN","roundTimeframe","timeframems","timestamp","direction","offset","SKIP_PROPS","_super","CandlestickView","_this","apply","arguments","type","seriesModel","ecModel","api","group","removeClipPath","_updateDrawMode","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","incrementalRender","params","_incrementalRenderLarge","_incrementalRenderNormal","isLargeDraw","pipelineContext","large","data","getData","oldData","_data","isSimpleBox","getLayout","needsClip","get","coord","coordinateSystem","clipArea","getArea","removeAll","diff","add","newIdx","hasValue","itemLayout","getItemLayout","isNormalBoxClipped","el","createNormalBox","shape","points","ends","setBoxCommon","setItemGraphicEl","update","oldIdx","getItemGraphicEl","remove","execute","createLarge","clipPath","setClipPath","dataIndex","next","incremental","Chart","NormalBoxPathShape","NormalBoxPath","opts","call","getDefaultShape","buildPath","ctx","__simpleBox","moveTo","lineTo","closePath","Path","isInit","transInit","z2","clipped","i","length","contain","itemModel","getItemModel","useStyle","getItemVisual","style","strokeNoScale","point","slice","initBaseline","LargeBoxPathShape","LargeBoxPath","__sign","x","largePoints","elP","elN","setLargeStyle","sign","borderColor","itemStyle","getModel","getItemStyle","fill","stroke","createSeriesDataSimply","opt","nameList","coordDimensions","encodeDefine","getEncode","source","getSource","dimensions","list","SeriesData","initData","WhiskerBoxCommonMixin","getInitialData","option","ordinalMeta","addOrdinal","xAxisModel","getComponent","yAxisModel","xAxisType","yAxisType","layout","getOrdinalMeta","coordDims","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","item","index","newItem","unshift","push","defaultValueDimensions","otherDims","tooltip","itemName","dimsDef","dimensionsCount","encodeDefaulter","getBaseAxis","dim","axis","CandlestickSeriesModel","defaultTooltip","getShadowDim","brushSelector","selectors","rect","brushRect","dependencies","defaultOption","zlevel","z","legendHoverLink","clip","color","color0","borderColor0","borderWidth","emphasis","scale","barMaxWidth","barMinWidth","barWidth","largeThreshold","progressive","progressiveThreshold","progressiveChunkMode","animationEasing","animationDuration","Series","CandlestickSeries","candlestickPreprocessor","series","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","seriesType","plan","createRenderPlanner","performRawSeries","reset","getColor","getBorderColor","isSeriesFiltered","isLargeRender","progress","existsStyle","ensureUniqueItemVisual","LargeArr","Float32Array","Array","candlestickLayout","coordSys","candleWidth","calculateCandleWidth","cDimIdx","vDimIdx","cDimI","getDimensionIndex","mapDimension","vDimsI","mapDimensionsAll","openDimI","closeDimI","lowestDimI","highestDimI","setLayout","largeProgress","normalProgress","store","getStore","axisDimVal","openVal","closeVal","lowestVal","highestVal","ocLow","min","ocHigh","max","ocLowPoint","getPoint","ocHighPoint","lowestPoint","highestPoint","addBodyEnd","subPixelOptimizePoint","setItemLayout","getSign","makeBrushRect","val","p","isNaN","NaN","dataToPoint","start","point1","point2","pmin","pmax","y","width","height","count","tmpIn","tmpOut","extent","baseAxis","bandWidth","getBandWidth","getExtent","abs","install","registers","registerChartView","registerSeriesModel","registerPreprocessor","registerVisual","registerLayout","ScatterSeriesModel","hasSymbolVisual","createSeriesData","useEncodeDefaulter","getProgressive","getProgressiveThreshold","symbolSize","opacity","select","universalTransition","divideShape","ScatterSeries","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","path","size","symbolProxy","symbolProxyShape","getContext","canBoost","_ctx","softClipShape","afterBrush","fillRect","findDataIndex","w","h","idx","x0","y0","LargeSymbolDraw","isPersistent","_incremental","updateData","symbolEl","rectHover","cursor","setShape","_setCommon","updateLayout","eachChild","child","startIndex","len","endIndex","byteOffset","buffer","incrementalPrepareUpdate","_clearIncremental","IncrementalDisplayable","silent","incrementalUpdate","taskParams","addDisplayable","end","isIncremental","hostModel","getVisual","clipShape","setColor","extrudeShadow","globalStyle","visualColor","ecData_1","seriesIndex","e","offsetX","offsetY","clearDisplaybles","ScatterView","symbolDraw","_updateSymbolDraw","_getClipShape","_finished","_symbolDraw","updateTransform","dirty","res","SymbolDraw","dispose","CalendarModel","init","parentModel","inputPositionParams","mergeAndNormalizeLayoutParams","mergeOption","getCellSize","cellSize","left","top","orient","splitLine","show","lineStyle","dayLabel","firstDay","position","margin","nameMap","monthLabel","align","formatter","yearLabel","fontFamily","fontWeight","fontSize","Component","target","raw","cellSizeArr","ignoreSize","hvIdx","MONTH_TEXT","EN","CN","WEEK_TEXT","CalendarView","calendarModel","rangeData","getRangeInfo","getOrient","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","sw","getCellWidth","sh","getCellHeight","time","getNextNDay","dataToRect","tl","self","lineStyleModel","getLineStyle","lineWidth","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","addPoints","formatedDate","getDateInfo","m","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","parsedDate","tmpD","day","_formatterLabel","format","_yearTextPositionControl","textEl","aligns","rotate","PI","rotation","verticalAlign","pos","xc","yc","posPoints","bottom","right","content","yearText","text","attr","_monthTextPositionControl","isCenter","vAlign","termPoints","toUpperCase","tmp","firstDayPoints","name_1","yyyy","yy","MM","M","monthText","_weekTextPositionControl","isStart","firstDayOfWeek","getFirstDayOfWeek","lweek","number","fweek","center","weekText","PROXIMATE_ONE_DAY","Calendar","getDimensionsInfo","_model","_rangeInfo","getRect","_rect","_sw","_sh","_orient","_firstDayOfWeek","getFullYear","mStr","d","getDate","dStr","getDay","getTime","n","Date","setDate","_lineWidth","_getRangeInfo","_initRangeOption","weeks","whNames","layoutParams","getBoxLayoutParams","cellNumbers","cellSizeSpecified","whGlobal","getWidth","getHeight","calendarRect","clamp","dayInfo","range","week","nthWeek","pointToData","pointToDate","contentShape","tr","br","bl","nthX","floor","nthY","_getDateByWeeksAndDay","convertToPixel","finder","getCoordSys","convertFromPixel","pixel","containPoint","console","warn","normalizedRange","rangeStr","test","reverse","reversed","parsedRange","allDay","startDateNum","endDateNum","dateNum","rangeInfo","nthDay","create","calendarList","eachComponent","calendar","eachSeries","calendarSeries","registerComponentModel","registerComponentView","registerCoordinateSystem","TimelineModel","layoutMode","mergeDefaultAndTheme","_initData","setCurrentIndex","currentIndex","loop","getCurrentIndex","isIndexMax","setPlayState","state","autoPlay","getPlayState","processedDataArr","thisOption","dataArr","axisType","names","_names","dimType","category","getCategories","realtime","padding","controlPosition","rewind","playInterval","label","SliderTimelineModel","backgroundColor","inverse","trigger","symbol","interval","checkpointStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","animation","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","itemSize","itemGap","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","TimelineView","TimelineAxis","coordExtent","getLabelModel","isHorizontal","Axis","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_axis","_createAxis","formatTooltip","getLabel","noName","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","_clearTimer","parsedLabelPos","labelPosOpt","viewRect","getViewRect","horizontal","vertical","playPosition","prevBtnPosition","nextBtnPosition","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","xLeft","xRight","axisExtent","labelAlign","labelBaseline","layoutInfo","mainGroup","_mainGroup","_labelGroup","matrix","rotateOriginX","rotateOriginY","clone","applyTransform","viewBound","getBound","mainBound","getBoundingRect","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","originX","originY","fromPos","from","to","dimIdx","boundIdx","setPosition","createScaleByModel","getTicks","mapArray","dataExtent","getDataExtent","setExtent","niceTicks","key","newGroup","_renderAxisLine","line","x1","y1","x2","y2","lineCap","progressLine","_progressLine","_currentPointer","_renderAxisTick","ticks","_tickSymbols","tick","tickCoord","dataToCoord","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","onclick","_changeTimeline","giveSymbol","ensureState","ecData","dataModel","labelModel","labels","getViewLabels","_tickLabels","labelItem","tickValue","normalLabelModel","hoverLabelModel","progressLabelModel","formattedLabel","_renderControl","hoverStyle","playState","makeBtn","iconName","willRotate","iconSize","btn","makeControlIcon","_handlePlayClick","_renderCurrentPointer","pointerModel","me","onCreate","pointer","draggable","drift","_handlePointerDrag","ondragend","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","dispatchAction","uid","dx","dy","_pointerChangeTimeline","mousePos","toCoord","_toAxisCoord","markRedraw","targetDataIndex","_findNearestTick","_timer","setTimeout","vertex","trans","getLocalTransform","graphic","axisCoord","dist","Infinity","each","clearTimeout","nextIndex","tickSymbols","tickLabels","toggleState","Ordinal","Time","locale","getLocaleModel","useUTC","Interval","objPath","icon","BoundingRect","setStyle","symbolType","scaleX","scaleY","symbolOffset","symbolRotate","noAnimation","dragging","animationCfg","duration","easing","stopAnimation","animateTo","installTimelineAction","registerAction","event","payload","resetOption","replaceMerge","timelinePreprocessor","timelineOpt","timeline","compatibleEC2","ec2Types","transferItem","has","dataItem","itemStyleEmphasis","labelNormal","normal","excludeLabelAttr","hasOwnProperty","registerSubTypeDefaulter","SelectDataZoomModel","DataZoomModel","SelectDataZoomView","DataZoomView","SelectZoomModel","SelectZoomView","installCommon","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","getDefaultOption","borderRadius","showTitle","iconStyle","ToolboxView","toolboxModel","featureOpts","features","_features","featureNames","DataDiffer","_featureNames","processFeature","listComponent","titleText","__title","emphasisState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","makeFont","needPutOnTop","topOffset","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","isUserFeatureName","isToolboxFeature","unusable","createIconPaths","setIconStatus","status","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconStr","pathEmphasisState","ignore","setTextContent","componentModel","formatterParamsExtra","defaultTextPosition","setTextConfig","hide","updateView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","browser","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","$a","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","canvasSupported","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","bar","stack","seriesOptGenreator","newOption","generateNewSeriesTypes","subType","seriesId","id","newSeriesOpt","categoryAxis","getAxesByScale","axisDim","axisModel","getReferringComponents","models","axisIndex","componentIndex","boundaryGap","radio","mainType","query","currentType","tiled","markPoint","markLine","isStack","echarts","BLOCK_SPLITER","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","rawData","getRawData","lines","items","j","assembleOtherSeries","vals","argLen","getName","getContentFromModel","result","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","dataZoomModel","queryComponents","percentRange","getPercentRange","pop","head","clear","snapshots","RestoreOption","Restore","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","s","CURSOR_MAP","ne","nw","se","DEFAULT_BRUSH_OPT","brushStyle","transformable","brushMode","removeOnClick","baseUID","BrushController","zr","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","interactionMutex","_brushOption","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","_transform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","isEnd","shouldShowCover","track","p2","p1","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform","localDirName","map","inverseMap","dir","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","transformCoordToLocal","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","_dragging","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","values","xyMinMax","cb","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","coordSysModel","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","minMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","set","cartesians","getCartesians","cartesian","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","master","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","coordToData","toLocalCoord","toGlobalCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","_onBrush","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","_dispatchZoomAction","dimName","findDataZoom","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minValueSpan","maxValueSpan","sliderMove","startValue","endValue","found","dzModel","getAxisModel","batch","filterMode","zoom","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisMainType","axisIndexPropName","newOpt","$fromToolbox","DataZoom","MARGINLEFT","MARGINRIGHT","upColor","upBorderColor","downColor","downBorderColor","buySignalColor","sellSignalColor","tradeBuyColor","tradeSellColor","buyData","sellData","chartOptions","updateChart","initializeChartOptions","strategy","timeframe_ms","filter","legend","textStyle","axisPointer","dom","viewSize","link","xAxis","axisLine","onZero","axisTick","axisLabel","splitNumber","gridIndex","yAxis","dataZoom","log","initial","hasData","chartTitle","colDate","findIndex","colOpen","colHigh","colLow","colClose","colVolume","colBuyData","colSellData","subplotCount","Object","keys","subplots","isArray","startingZoom","forEach","options","encode","assign","entries","main_plot","col","showSymbol","plotIndex","nameLocation","nameGap","sk","sv","randomColor","getTradeEntries","tradesClose","nameClose","sp","closeSeries","$refs","candleChart","setOption","filteredTrades","trade","open_timestamp","data_start_ts","data_stop_ts","open_rate","undefined","close_timestamp","close_date","close_rate","required","default","components","plotConfigNameLoc","selSubPlot","newSubplotName","addSubplot","delSubplot","usedColumns","selIndicatorName","$event","addNewIndicator","removeIndicator","selIndicator","loadPlotConfig","loadPlotConfigFromStrategy","savePlotConfig","resetConfig","showConfig","loadConfigFromString","tempPlotConfigValid","plotConfigJson","selAvailableIndicator","availableGraphTypes","emitIndicator","graphType","selColor","newColor","clickCancel","cancelled","combinedIndicator","plotOptions","tempPlotConfig","currentPlotConfig","newValue","addIndicator","JSON","stringify","parse","err","isMainPlot","newIndicator","indicator","emitPlotConfig","saveCustomPlotConfig","getStrategyPlotConfig","strategyPlotConfig","addAlert","message","Action","Getter","PlotIndicator","uiSettingsNs","showPlotConfig","historicView","history","candleData","selectedPair","setPlotConfigName","$bvModal","getPairHistory","timerange","getPairCandles","limit","find","CandleChart","PlotConfigurator"],"mappings":"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","file":"js/backtest~graph~trade.5c891550.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=style&index=0&id=7e9c9dc0&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=style&index=0&id=21261fd8&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=style&index=0&id=2bde330a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex h-100\"},[_c('div',{staticClass:\"flex-fill container-fluid flex-column align-items-stretch d-flex h-100\"},[(_vm.plotConfigModal)?_c('b-modal',{attrs:{\"id\":\"plotConfiguratorModal\",\"title\":\"Plot Configurator\",\"ok-only\":\"\",\"hide-backdrop\":\"\",\"button-size\":\"sm\"}},[_c('PlotConfigurator',{attrs:{\"columns\":_vm.datasetColumns},model:{value:(_vm.plotConfig),callback:function ($$v) {_vm.plotConfig=$$v},expression:\"plotConfig\"}})],1):_vm._e(),_c('div',{staticClass:\"row mr-0\"},[_c('div',{staticClass:\"col-mb-2 ml-2 d-flex align-items-center\"},[_c('span',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(_vm._s(_vm.strategyName)+\" | \"+_vm._s(_vm.timeframe || ''))]),_c('b-select',{staticClass:\"ml-2\",attrs:{\"options\":_vm.availablePairs,\"size\":\"sm\"},on:{\"change\":_vm.refresh},model:{value:(_vm.pair),callback:function ($$v) {_vm.pair=$$v},expression:\"pair\"}}),_c('b-button',{staticClass:\"ml-2\",attrs:{\"disabled\":!!!_vm.pair,\"size\":\"sm\"},on:{\"click\":_vm.refresh}},[_vm._v(\"↻\")]),(_vm.dataset)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"Buysignals: \"+_vm._s(_vm.dataset.buy_signals))]):_vm._e(),(_vm.dataset)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"SellSignals: \"+_vm._s(_vm.dataset.sell_signals))]):_vm._e()],1),_c('div',{staticClass:\"col-mb-2 ml-auto mr-2\"},[_c('b-select',{attrs:{\"options\":_vm.availablePlotConfigNames,\"size\":\"sm\"},on:{\"change\":_vm.plotConfigChanged},model:{value:(_vm.plotConfigName),callback:function ($$v) {_vm.plotConfigName=$$v},expression:\"plotConfigName\"}})],1),_c('div',{staticClass:\"col-mb-2 mr-1\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"title\":\"Plot configurator\"},on:{\"click\":_vm.showConfigurator}},[_vm._v(\"⚙\")])],1)]),_c('div',{staticClass:\"row mr-1 ml-1 h-100\"},[(_vm.hasDataset)?_c('CandleChart',{attrs:{\"dataset\":_vm.dataset,\"trades\":_vm.trades,\"plot-config\":_vm.plotConfig,\"use-u-t-c\":_vm.timezone === 'UTC',\"theme\":_vm.getChartTheme}}):_c('label',{staticStyle:{\"margin\":\"auto auto\",\"font-size\":\"1.5rem\"}},[_vm._v(\"No data available\")])],1)],1),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"in-out\"}},[(!_vm.plotConfigModal)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPlotConfig),expression:\"showPlotConfig\"}],staticClass:\"w-25 config-sidebar\"},[_c('PlotConfigurator',{attrs:{\"columns\":_vm.datasetColumns,\"as-modal\":false},model:{value:(_vm.plotConfig),callback:function ($$v) {_vm.plotConfig=$$v},expression:\"plotConfig\"}})],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-grow-1 chart-wrapper\"},[(_vm.hasData)?_c('v-chart',{ref:\"candleChart\",attrs:{\"theme\":_vm.theme,\"autoresize\":\"\",\"manual-update\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function () {\n  // eslint-disable-next-line no-bitwise\n  return `#${((Math.random() * 0xffffff) << 0).toString(16)}`;\n}\n","const ROUND_UP = 2;\nconst ROUND_DOWN = 3;\n\nexport function roundTimeframe(\n  timeframems: number,\n  timestamp: number,\n  direction: number = ROUND_DOWN,\n) {\n  const offset = timestamp % timeframems;\n  return timestamp - offset + (direction === ROUND_UP ? timeframems : 0);\n}\n\nexport default {\n  ROUND_UP,\n  ROUND_DOWN,\n  roundTimeframe,\n};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1\n  });\n  group.add(elN);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']); // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport SeriesData from '../../data/SeriesData';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { extend } from 'zrender/lib/core/util';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { subPixelOptimize } from '../../util/graphic';\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { parsePercent } from '../../util/number';\nimport { map, retrieve2 } from 'zrender/lib/core/util';\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = new LargeArr(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView';\nimport CandlestickSeriesModel from './CandlestickSeries';\nimport preprocessor from './preprocessor';\nimport candlestickVisual from './candlestickVisual';\nimport candlestickLayout from './candlestickLayout';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport SeriesModel from '../../model/Series';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport { createSymbol } from '../../util/symbol';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport { getECData } from '../../util/innerStore';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeSymbolDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this.group.removeAll();\n    var symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, false, opt);\n\n    this.group.add(symbolEl);\n    this._incremental = null;\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    if (this._incremental) {\n      return;\n    }\n\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points);\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n    // PENDING Incremental data?\n\n\n    if (data.count() > 2e6) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var symbolEl;\n\n    if (this._incremental) {\n      symbolEl = new LargeSymbolPath();\n\n      this._incremental.addDisplayable(symbolEl, true);\n    } else {\n      symbolEl = new LargeSymbolPath({\n        rectHover: true,\n        cursor: 'default',\n        startIndex: taskParams.start,\n        endIndex: taskParams.end\n      });\n      symbolEl.incremental = true;\n      this.group.add(symbolEl);\n    }\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, !!this._incremental, opt);\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, isIncremental, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    }\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  LargeSymbolDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw';\nimport pointsLayout from '../../layout/points';\nimport ChartView from '../../view/Chart';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ScatterSeriesModel from './ScatterSeries';\nimport ScatterView from './ScatterView';\nimport { install as installGridSimple } from '../../component/grid/installSimple';\nimport layoutPoints from '../../layout/points';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout';\n\nvar CalendarModel =\n/** @class */\nfunction (_super) {\n  __extends(CalendarModel, _super);\n\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      nameMap: 'en',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      // cn en []\n      nameMap: 'en',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as formatUtil from '../../util/format';\nimport * as numberUtil from '../../util/number';\nimport ComponentView from '../../view/Component';\nvar MONTH_TEXT = {\n  EN: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  CN: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']\n};\nvar WEEK_TEXT = {\n  EN: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  CN: ['日', '一', '二', '三', '四', '五', '六']\n};\n\nvar CalendarView =\n/** @class */\nfunction (_super) {\n  __extends(CalendarView, _super);\n\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarView.type;\n    return _this;\n  }\n\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, orient, group);\n\n    this._renderWeekText(calendarModel, rangeData, orient, group);\n  }; // render day rect\n\n\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  }; // render separate line\n\n\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  }; // get points at both ends\n\n\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  }; // render split line\n\n\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  }; // render month line of one week points\n\n\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  };\n\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (typeof formatter === 'string' && formatter) {\n      return formatUtil.formatTplSimple(formatter, params);\n    }\n\n    if (typeof formatter === 'function') {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  };\n\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  }; // render year\n\n\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render month and year text\n\n\n  CalendarView.prototype._renderMonthText = function (calendarModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = MONTH_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: zrUtil.extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render weeks\n\n\n  CalendarView.prototype._renderWeekText = function (calendarModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (zrUtil.isString(nameMap)) {\n      nameMap = WEEK_TEXT[nameMap.toUpperCase()] || [];\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = numberUtil.parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: zrUtil.extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\n\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number'; // (24*60*60*1000)\n\nvar PROXIMATE_ONE_DAY = 86400000;\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions; // Required in createListFromData\n\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n\n\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n\n\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.getCellSize().slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    } // Has been calculated out number.\n\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n\n\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n\n\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n\n\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n\n\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n\n\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n\n    var normalizedRange; // Convert [1990] to 1990\n\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString(); // One year.\n\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      } // One month\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      } // One day\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      } // Not handling it.\n\n\n      return range;\n    }\n\n    var tmp = this._getRangeInfo(normalizedRange);\n\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n\n\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n\n\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\n\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\n\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel';\nimport CalendarView from './CalendarView';\nimport Calendar from '../../coord/calendar/Calendar';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport SeriesData from '../../data/SeriesData';\nimport { each, isObject, clone } from 'zrender/lib/core/util';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model';\n\nvar TimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(TimelineModel, _super);\n\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this._initData();\n  };\n\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n\n\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n\n\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n\n\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n\n\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n\n  TimelineModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\n\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport { mixin } from 'zrender/lib/core/util';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderTimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineModel, _super);\n\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\n\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar TimelineView =\n/** @class */\nfunction (_super) {\n  __extends(TimelineView, _super);\n\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineView.type;\n    return _this;\n  }\n\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\n\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis';\n/**\n * Extend axis 2d\n */\n\nvar TimelineAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimelineAxis, _super);\n\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n\n  return TimelineAxis;\n}(Axis);\n\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as layout from '../../util/layout';\nimport TimelineView from './TimelineView';\nimport TimelineAxis from './TimelineAxis';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol';\nimport * as numberUtil from '../../util/number';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util';\nimport OrdinalScale from '../../scale/Ordinal';\nimport TimeScale from '../../scale/Time';\nimport IntervalScale from '../../scale/Interval';\nimport { parsePercent } from 'zrender/lib/contain/text';\nimport { makeInner } from '../../util/model';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\n\nvar SliderTimelineView =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineView, _super);\n\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n\n      var mainGroup_1 = this._createGroup('_mainGroup');\n\n      var labelGroup = this._createGroup('_labelGroup');\n\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n\n      this._position(layoutInfo_1, timelineModel);\n    }\n\n    this._doPlayStop();\n\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos; // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    var axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType); // Customize scale. The `tickValue` is `dataIndex`.\n\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.niceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var data = timelineModel.getData(); // Show all ticks, despite ignoring strategy.\n\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = []; // The value is dataIndex, see the costomized scale.\n\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n\n      _this._tickSymbols.push(el);\n    });\n  };\n\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var labelModel = axis.getLabelModel();\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the costomized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n\n      _this._tickLabels.push(textEl);\n    });\n  };\n\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n\n    this._currentPointer.markRedraw();\n\n    this._progressLine.shape.x2 = toCoord;\n\n    this._progressLine.dirty();\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  };\n\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3])); // TODO createIcon won't use style in opt.\n\n  if (style) {\n    icon.setStyle(style);\n  }\n\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\n\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false); // The timeline has played to the end, trigger event\n\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    } // Set normalized currentIndex to payload.\n\n\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel';\nimport SliderTimelineView from './SliderTimelineView';\nimport { installTimelineAction } from './timelineAction';\nimport preprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type;\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]);\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Trade, PairHistory, PlotConfig } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport { roundTimeframe } from '@/shared/timemath';\nimport ECharts from 'vue-echarts';\n\nimport { use } from 'echarts/core';\nimport { EChartsOption, SeriesOption, ScatterSeriesOption } from 'echarts';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { CandlestickChart, LineChart, BarChart, ScatterChart } from 'echarts/charts';\nimport {\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n} from 'echarts/components';\n\nuse([\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n\n  CandlestickChart,\n  BarChart,\n  LineChart,\n  ScatterChart,\n  CanvasRenderer,\n]);\n\n// Chart default options\nconst MARGINLEFT = '4%';\nconst MARGINRIGHT = '1%';\n\n// Binance colors\nconst upColor = '#26A69A';\nconst upBorderColor = '#26A69A';\nconst downColor = '#EF5350';\nconst downBorderColor = '#EF5350';\n\nconst buySignalColor = '#00ff26';\nconst sellSignalColor = '#faba25';\nconst tradeBuyColor = 'cyan';\nconst tradeSellColor = 'pink';\n\n@Component({\n  components: { 'v-chart': ECharts },\n})\nexport default class CandleChart extends Vue {\n  $refs!: {\n    candleChart: typeof ECharts;\n  };\n\n  @Prop({ required: false, default: [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: true }) readonly dataset!: PairHistory;\n\n  @Prop({ default: true }) readonly useUTC!: boolean;\n\n  @Prop({ required: true }) plotConfig!: PlotConfig;\n\n  @Prop({ default: 'dark' }) theme!: string;\n\n  buyData = [] as Array<number>[];\n\n  sellData = [] as Array<number>[];\n\n  chartOptions: EChartsOption = {};\n\n  @Watch('dataset')\n  datasetChanged() {\n    this.updateChart();\n  }\n\n  @Watch('plotConfig')\n  plotConfigChanged() {\n    this.initializeChartOptions();\n  }\n\n  get strategy() {\n    return this.dataset ? this.dataset.strategy : '';\n  }\n\n  get pair() {\n    return this.dataset ? this.dataset.pair : '';\n  }\n\n  get timeframe() {\n    return this.dataset ? this.dataset.timeframe : '';\n  }\n\n  get timeframems() {\n    return this.dataset ? this.dataset.timeframe_ms : 0;\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasData() {\n    return this.dataset !== null && typeof this.dataset === 'object';\n  }\n\n  get filteredTrades() {\n    return this.trades.filter((item: Trade) => item.pair === this.pair);\n  }\n\n  mounted() {\n    this.initializeChartOptions();\n  }\n\n  get chartTitle() {\n    return `${this.strategy} - ${this.pair} - ${this.timeframe}`;\n  }\n\n  initializeChartOptions() {\n    this.chartOptions = {\n      title: [\n        {\n          // text: this.chartTitle,\n          show: false,\n        },\n      ],\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      useUTC: this.useUTC,\n      animation: false,\n      legend: {\n        // Initial legend, further entries are pushed to the below list\n        data: ['Candles', 'Volume', 'Buy', 'Sell'],\n        right: '1%',\n      },\n      tooltip: {\n        show: true,\n        trigger: 'axis',\n        backgroundColor: 'rgba(80,80,80,0.7)',\n        borderWidth: 0,\n        textStyle: {\n          color: '#fff',\n        },\n        axisPointer: {\n          type: 'cross',\n          lineStyle: {\n            color: '#cccccc',\n            width: 1,\n            opacity: 1,\n          },\n        },\n        // positioning copied from https://echarts.apache.org/en/option.html#tooltip.position\n        position(pos, params, dom, rect, size) {\n          // tooltip will be fixed on the right if mouse hovering on the left,\n          // and on the left if hovering on the right.\n          const obj = { top: 60 };\n          obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 5;\n          return obj;\n        },\n      },\n      axisPointer: {\n        link: [{ xAxisIndex: 'all' }],\n        label: {\n          backgroundColor: '#777',\n        },\n      },\n      xAxis: [\n        {\n          type: 'time',\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: true },\n          axisLabel: { show: true },\n          axisPointer: {\n            label: { show: false },\n          },\n          position: 'top',\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n        {\n          type: 'time',\n          gridIndex: 1,\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: false },\n          axisLabel: { show: false },\n          axisPointer: {\n            label: { show: false },\n          },\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n      ],\n      yAxis: [\n        {\n          scale: true,\n        },\n        {\n          scale: true,\n          gridIndex: 1,\n          splitNumber: 2,\n          position: 'right',\n          axisLabel: { show: false },\n          axisLine: { show: false },\n          axisTick: { show: false },\n          splitLine: { show: false },\n        },\n      ],\n      dataZoom: [\n        // Start values are recalculated once the data is known\n        {\n          type: 'inside',\n          xAxisIndex: [0, 1],\n          start: 80,\n          end: 100,\n        },\n        {\n          show: true,\n          xAxisIndex: [0, 1],\n          type: 'slider',\n          bottom: 10,\n          start: 80,\n          end: 100,\n        },\n      ],\n      // visualMap: {\n      //   //  TODO: this would allow to colorize volume bars (if we'd want this)\n      //   //  Needs green / red indicator column in data.\n      //   show: true,\n      //   seriesIndex: 1,\n      //   dimension: 5,\n      //   pieces: [\n      //     {\n      //       max: 500000.0,\n      //       color: downColor,\n      //     },\n      //     {\n      //       min: 500000.0,\n      //       color: upColor,\n      //     },\n      //   ],\n      // },\n    };\n\n    console.log('Initialized');\n    this.updateChart(true);\n  }\n\n  updateChart(initial = false) {\n    if (!this.hasData) {\n      return;\n    }\n    if (this.chartOptions?.title) {\n      this.chartOptions.title[0].text = this.chartTitle;\n    }\n    const colDate = this.dataset.columns.findIndex((el) => el === '__date_ts');\n    const colOpen = this.dataset.columns.findIndex((el) => el === 'open');\n    const colHigh = this.dataset.columns.findIndex((el) => el === 'high');\n    const colLow = this.dataset.columns.findIndex((el) => el === 'low');\n    const colClose = this.dataset.columns.findIndex((el) => el === 'close');\n    const colVolume = this.dataset.columns.findIndex((el) => el === 'volume');\n    const colBuyData = this.dataset.columns.findIndex((el) => el === '_buy_signal_open');\n    const colSellData = this.dataset.columns.findIndex((el) => el === '_sell_signal_open');\n    const subplotCount =\n      'subplots' in this.plotConfig ? Object.keys(this.plotConfig.subplots).length : 0;\n\n    if (this.chartOptions?.dataZoom && Array.isArray(this.chartOptions?.dataZoom)) {\n      // Only set zoom once ...\n      if (initial) {\n        const startingZoom = (1 - 250 / this.dataset.length) * 100;\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            this.chartOptions.dataZoom[i].start = startingZoom;\n          }\n        });\n      } else {\n        // Remove start/end settings after chart initialization to avoid chart resetting\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            delete this.chartOptions.dataZoom[i].start;\n            delete this.chartOptions.dataZoom[i].end;\n          }\n        });\n      }\n    }\n\n    const options: EChartsOption = {\n      dataset: {\n        source: this.dataset.data,\n      },\n      grid: [\n        {\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * 10 + 10}%`,\n        },\n        {\n          // Volume\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * 10 + 5}%`,\n          height: '10%',\n        },\n      ],\n\n      series: [\n        {\n          name: 'Candles',\n          type: 'candlestick',\n          barWidth: '80%',\n          itemStyle: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor,\n          },\n          encode: {\n            x: colDate,\n            // open, close, low, high\n            y: [colOpen, colClose, colLow, colHigh],\n          },\n        },\n        {\n          name: 'Volume',\n          type: 'bar',\n          xAxisIndex: 1,\n          yAxisIndex: 1,\n          itemStyle: {\n            color: '#777777',\n          },\n          large: true,\n          encode: {\n            x: colDate,\n            y: colVolume,\n          },\n        },\n        {\n          name: 'Buy',\n          type: 'scatter',\n          symbol: 'triangle',\n          symbolSize: 10,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: buySignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colBuyData,\n          },\n        },\n        {\n          name: 'Sell',\n          type: 'scatter',\n          symbol: 'diamond',\n          symbolSize: 8,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: sellSignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colSellData,\n          },\n        },\n      ],\n    };\n\n    // Merge this into original data\n    Object.assign(this.chartOptions, options);\n\n    if ('main_plot' in this.plotConfig) {\n      Object.entries(this.plotConfig.main_plot).forEach(([key, value]) => {\n        const col = this.dataset.columns.findIndex((el) => el === key);\n        if (col > 1) {\n          if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n            this.chartOptions.legend.data.push(key);\n          }\n          const sp: SeriesOption = {\n            name: key,\n            type: value.type || 'line',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: value.color,\n            },\n            encode: {\n              x: colDate,\n              y: col,\n            },\n            showSymbol: false,\n          };\n          if (Array.isArray(this.chartOptions.series)) {\n            this.chartOptions.series.push(sp);\n          }\n        } else {\n          console.log(`element ${key} for main plot not found in columns.`);\n        }\n      });\n    }\n\n    // START Subplots\n    if ('subplots' in this.plotConfig) {\n      let plotIndex = 2;\n      Object.entries(this.plotConfig.subplots).forEach(([key, value]) => {\n        // define yaxis\n        if (Array.isArray(this.chartOptions.yAxis)) {\n          this.chartOptions.yAxis.push({\n            scale: true,\n            gridIndex: plotIndex,\n            name: key,\n            nameLocation: 'middle',\n            nameGap: 60,\n            axisLabel: { show: true },\n            axisLine: { show: false },\n            axisTick: { show: false },\n            splitLine: { show: false },\n          });\n        }\n        if (Array.isArray(this.chartOptions.xAxis)) {\n          this.chartOptions.xAxis.push({\n            type: 'time',\n            scale: true,\n            gridIndex: plotIndex,\n            boundaryGap: false,\n            axisLine: { onZero: false },\n            axisTick: { show: false },\n            axisLabel: { show: false },\n            axisPointer: {\n              label: { show: false },\n            },\n            splitLine: { show: false },\n            splitNumber: 20,\n          });\n        }\n        if (Array.isArray(this.chartOptions.dataZoom)) {\n          this.chartOptions.dataZoom.forEach((el) =>\n            el.xAxisIndex && Array.isArray(el.xAxisIndex) ? el.xAxisIndex.push(plotIndex) : null,\n          );\n        }\n        if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n          this.chartOptions.grid.push({\n            left: MARGINLEFT,\n            right: MARGINRIGHT,\n            bottom: `${plotIndex * 8}%`,\n            height: '8%',\n          });\n        }\n        Object.entries(value).forEach(([sk, sv]) => {\n          // entries per subplot\n          const col = this.dataset.columns.findIndex((el) => el === sk);\n          if (col > 0) {\n            if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n              this.chartOptions.legend.data.push(sk);\n            }\n            const sp: SeriesOption = {\n              name: sk,\n              type: sv.type || 'line',\n              xAxisIndex: plotIndex,\n              yAxisIndex: plotIndex,\n              itemStyle: {\n                color: sv.color || randomColor(),\n              },\n              encode: {\n                x: colDate,\n                y: col,\n              },\n              showSymbol: false,\n            };\n            if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n              this.chartOptions.series.push(sp);\n            }\n          } else {\n            console.log(`element ${sk} was not found in the columns.`);\n          }\n        });\n\n        plotIndex += 1;\n      });\n    }\n    // END Subplots\n    // Last subplot should show xAxis labels\n    // if (options.xAxis && Array.isArray(options.xAxis)) {\n    //   options.xAxis[options.xAxis.length - 1].axisLabel.show = true;\n    //   options.xAxis[options.xAxis.length - 1].axisTick.show = true;\n    // }\n    if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n      // Last subplot is bottom\n      this.chartOptions.grid[this.chartOptions.grid.length - 1].bottom = '50px';\n      delete this.chartOptions.grid[this.chartOptions.grid.length - 1].top;\n    }\n    const { trades, tradesClose } = this.getTradeEntries();\n\n    const name = 'Trades';\n    const nameClose = 'Trades Close';\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(name);\n    }\n    const sp: ScatterSeriesOption = {\n      name,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeBuyColor,\n      },\n      data: trades,\n    };\n    if (Array.isArray(this.chartOptions?.series)) {\n      this.chartOptions.series.push(sp);\n    }\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(nameClose);\n    }\n    const closeSeries: ScatterSeriesOption = {\n      name: nameClose,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeSellColor,\n      },\n      data: tradesClose,\n    };\n    if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n      this.chartOptions.series.push(closeSeries);\n    }\n\n    console.log('chartOptions', this.chartOptions);\n\n    this.$refs.candleChart.setOption(this.chartOptions);\n  }\n\n  /** Return trade entries for charting */\n  getTradeEntries() {\n    const trades: (string | number)[][] = [];\n    const tradesClose: (string | number)[][] = [];\n    for (let i = 0, len = this.filteredTrades.length; i < len; i += 1) {\n      const trade: Trade = this.filteredTrades[i];\n      if (\n        trade.open_timestamp >= this.dataset.data_start_ts &&\n        trade.open_timestamp <= this.dataset.data_stop_ts\n      ) {\n        trades.push([roundTimeframe(this.timeframems, trade.open_timestamp), trade.open_rate]);\n      }\n      if (\n        trade.close_timestamp !== undefined &&\n        trade.close_timestamp < this.dataset.data_stop_ts &&\n        trade.close_timestamp > this.dataset.data_start_ts\n      ) {\n        if (trade.close_date !== undefined && trade.close_rate !== undefined) {\n          tradesClose.push([\n            roundTimeframe(this.timeframems, trade.close_timestamp),\n            trade.close_rate,\n          ]);\n        }\n      }\n    }\n    return { trades, tradesClose };\n  }\n\n  // createSignalData(colDate: number, colOpen: number, colBuy: number, colSell: number): void {\n  // Calculate Buy and sell Series\n  // if (!this.signalsCalculated) {\n  //   // Generate Buy and sell array (using open rate to display marker)\n  //   for (let i = 0, len = this.dataset.data.length; i < len; i += 1) {\n  //     if (this.dataset.data[i][colBuy] === 1) {\n  //       this.buyData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //     if (this.dataset.data[i][colSell] === 1) {\n  //       this.sellData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //   }\n  //   this.signalsCalculated = true;\n  // }\n  // }\n\n  @Watch('useUTC')\n  useUTCChanged() {\n    this.initializeChartOptions();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChart.vue?vue&type=template&id=21261fd8&scoped=true&\"\nimport script from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CandleChart.vue?vue&type=style&index=0&id=21261fd8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21261fd8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.columns)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Plot config name\",\"label-for\":\"idPlotConfigName\"}},[_c('b-form-input',{attrs:{\"id\":\"idPlotConfigName\",\"size\":\"sm\"},model:{value:(_vm.plotConfigNameLoc),callback:function ($$v) {_vm.plotConfigNameLoc=$$v},expression:\"plotConfigNameLoc\"}})],1),_c('div',{staticClass:\"col-mb-3\"},[_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Target\",\"label-for\":\"FieldSel\"}},[_c('b-form-select',{attrs:{\"id\":\"FieldSel\",\"options\":_vm.subplots,\"select-size\":3},model:{value:(_vm.selSubPlot),callback:function ($$v) {_vm.selSubPlot=$$v},expression:\"selSubPlot\"}})],1)],1),_c('b-form-group',{attrs:{\"label\":\"Add new plot\",\"label-for\":\"newSubPlot\"}},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-form-input',{staticClass:\"addPlot\",attrs:{\"id\":\"newSubPlot\"},model:{value:(_vm.newSubplotName),callback:function ($$v) {_vm.newSubplotName=$$v},expression:\"newSubplotName\"}}),_c('b-input-group-append',[_c('b-button',{on:{\"click\":_vm.addSubplot}},[_vm._v(\"+\")]),(_vm.selSubPlot && _vm.selSubPlot != 'main_plot')?_c('b-button',{on:{\"click\":_vm.delSubplot}},[_vm._v(\"-\")]):_vm._e()],1)],1)],1),_c('hr'),_c('div',[_c('b-form-group',{attrs:{\"label\":\"Used indicators\",\"label-for\":\"selectedIndicators\"}},[_c('b-form-select',{attrs:{\"id\":\"selectedIndicators\",\"options\":_vm.usedColumns,\"select-size\":4},model:{value:(_vm.selIndicatorName),callback:function ($$v) {_vm.selIndicatorName=$$v},expression:\"selIndicatorName\"}})],1)],1),_c('div',[_c('b-button',{attrs:{\"variant\":\"primary\",\"title\":\"Add indicator to plot\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.addNewIndicator = !_vm.addNewIndicator}}},[_vm._v(\" Add new indicator \")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"title\":\"Remove indicator to plot\",\"size\":\"sm\",\"disabled\":!_vm.selIndicatorName},on:{\"click\":_vm.removeIndicator}},[_vm._v(\" Remove indicator \")])],1),_c('PlotIndicator',{staticClass:\"mt-1\",attrs:{\"columns\":_vm.columns,\"add-new\":_vm.addNewIndicator},model:{value:(_vm.selIndicator),callback:function ($$v) {_vm.selIndicator=$$v},expression:\"selIndicator\"}}),_c('hr'),_c('div',[_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfig}},[_vm._v(\"Load\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfigFromStrategy}},[_vm._v(\" From strategy \")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"data-toggle\":\"tooltip\",\"title\":\"Save configuration\"},on:{\"click\":_vm.savePlotConfig}},[_vm._v(\"Save\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Load configuration from text box below\"},on:{\"click\":_vm.resetConfig}},[_vm._v(\"Reset\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"id\":\"showButton\",\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Show configuration for easy transfer to a strategy\"},on:{\"click\":function($event){_vm.showConfig = !_vm.showConfig}}},[_vm._v(\"Show\")]),(_vm.showConfig)?_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Load configuration from text box below\"},on:{\"click\":_vm.loadConfigFromString}},[_vm._v(\"Load from String\")]):_vm._e()],1),(_vm.showConfig)?_c('div',{staticClass:\"col-mb-5 ml-1 mt-2\"},[_c('b-textarea',{staticClass:\"textArea\",attrs:{\"id\":\"TextArea\",\"size\":\"sm\",\"state\":_vm.tempPlotConfigValid},model:{value:(_vm.plotConfigJson),callback:function ($$v) {_vm.plotConfigJson=$$v},expression:\"plotConfigJson\"}})],1):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.addNew)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Add indicator\",\"label-for\":\"indicatorSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"indicatorSelector\",\"options\":_vm.columns,\"select-size\":4},model:{value:(_vm.selAvailableIndicator),callback:function ($$v) {_vm.selAvailableIndicator=$$v},expression:\"selAvailableIndicator\"}})],1)],1):_vm._e(),_c('b-form-group',{attrs:{\"label\":\"Type\",\"label-for\":\"plotTypeSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"plotTypeSelector\",\"size\":\"sm\",\"options\":_vm.availableGraphTypes},on:{\"change\":function($event){return _vm.emitIndicator()}},model:{value:(_vm.graphType),callback:function ($$v) {_vm.graphType=$$v},expression:\"graphType\"}})],1),_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Color\",\"label-for\":\"colsel\",\"size\":\"sm\"}},[_c('b-input-group',[_c('b-input-group-prepend',[_c('div',{staticClass:\"colorbox mr-2\",style:({ 'background-color': _vm.selColor })})]),_c('b-form-input',{attrs:{\"id\":\"colsel\",\"size\":\"sm\"},model:{value:(_vm.selColor),callback:function ($$v) {_vm.selColor=$$v},expression:\"selColor\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.newColor}},[_vm._v(\"↻\")])],1)],1)],1),_c('div',{staticClass:\"d-flex d-flex-columns d-flex\"},[(_vm.addNew)?_c('b-button',{attrs:{\"variant\":\"primary\",\"title\":\"Add \",\"size\":\"sm\"},on:{\"click\":_vm.emitIndicator}},[_vm._v(\" Add new indicator \")]):_vm._e(),(_vm.addNew)?_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"title\":\"Add \",\"size\":\"sm\"},on:{\"click\":_vm.clickCancel}},[_vm._v(\" Cancel \")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ChartType, IndicatorConfig } from '@/types';\nimport { Component, Emit, Prop, Vue, Watch } from 'vue-property-decorator';\nimport randomColor from '@/shared/randomColor';\n\n@Component({})\nexport default class PlotIndicator extends Vue {\n  @Prop({ required: true }) value!: Record<string, IndicatorConfig>;\n\n  @Prop({ required: true }) columns!: string[];\n\n  @Prop({ required: true }) addNew!: boolean;\n\n  @Emit('input')\n  emitIndicator() {\n    return this.combinedIndicator;\n  }\n\n  selColor = randomColor();\n\n  graphType: ChartType = ChartType.line;\n\n  availableGraphTypes = Object.keys(ChartType);\n\n  selAvailableIndicator = '';\n\n  cancelled = false;\n\n  @Watch('value')\n  watchValue() {\n    [this.selAvailableIndicator] = Object.keys(this.value);\n    this.cancelled = false;\n    if (this.selAvailableIndicator && this.value) {\n      this.selColor = this.value[this.selAvailableIndicator].color || randomColor();\n      this.graphType = this.value[this.selAvailableIndicator].type || ChartType.line;\n    }\n  }\n\n  @Watch('selColor')\n  watchColor() {\n    this.emitIndicator();\n  }\n\n  clickCancel() {\n    this.cancelled = true;\n    this.emitIndicator();\n  }\n\n  get combinedIndicator() {\n    if (this.cancelled || !this.selAvailableIndicator) {\n      return {};\n    }\n    return {\n      [this.selAvailableIndicator]: {\n        color: this.selColor,\n        type: this.graphType,\n      },\n    };\n  }\n\n  newColor() {\n    this.selColor = randomColor();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlotIndicator.vue?vue&type=template&id=7e9c9dc0&scoped=true&\"\nimport script from \"./PlotIndicator.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlotIndicator.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlotIndicator.vue?vue&type=style&index=0&id=7e9c9dc0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e9c9dc0\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Emit, Watch } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\nimport { PlotConfig, EMPTY_PLOTCONFIG, IndicatorConfig } from '@/types';\nimport { getCustomPlotConfig } from '@/shared/storage';\nimport PlotIndicator from '@/components/charts/PlotIndicator.vue';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport { AlertActions } from '@/store/modules/alerts';\n\nconst ftbot = namespace('ftbot');\n\nconst alerts = namespace('alerts');\n\n@Component({\n  components: { PlotIndicator },\n})\nexport default class PlotConfigurator extends Vue {\n  @Prop({ required: true }) value!: PlotConfig;\n\n  @Prop({ required: true }) columns!: Array<string>;\n\n  @Prop({ required: false, default: true }) asModal!: boolean;\n\n  @Emit('input')\n  emitPlotConfig() {\n    return this.plotConfig;\n  }\n\n  @ftbot.Action getStrategyPlotConfig;\n\n  @ftbot.Getter [BotStoreGetters.strategyPlotConfig];\n\n  get selIndicator(): Record<string, IndicatorConfig> {\n    if (this.addNewIndicator) {\n      return {};\n    }\n    if (this.selIndicatorName) {\n      return {\n        [this.selIndicatorName]: this.currentPlotConfig[this.selIndicatorName],\n      };\n    }\n    return {};\n  }\n\n  set selIndicator(newValue: Record<string, IndicatorConfig>) {\n    console.log('newValue', newValue);\n    const name = Object.keys(newValue)[0];\n    // this.currentPlotConfig[this.selIndicatorName] = { ...newValue[name] };\n    // this.emitPlotConfig();\n    if (name && newValue) {\n      this.addIndicator(newValue);\n    } else {\n      this.addNewIndicator = false;\n    }\n  }\n\n  plotConfig: PlotConfig = EMPTY_PLOTCONFIG;\n\n  plotOptions = [\n    { text: 'Main Plot', value: 'main_plot' },\n    { text: 'Subplots', value: 'subplots' },\n  ];\n\n  plotConfigNameLoc = 'default';\n\n  newSubplotName = '';\n\n  selAvailableIndicator = '';\n\n  selIndicatorName = '';\n\n  addNewIndicator = false;\n\n  showConfig = false;\n\n  selSubPlot = 'main_plot';\n\n  tempPlotConfig?: PlotConfig = undefined;\n\n  tempPlotConfigValid = true;\n\n  @ftbot.Action saveCustomPlotConfig;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action updatePlotConfigName!: (plotConfigName: string) => void;\n\n  @ftbot.Getter [BotStoreGetters.plotConfigName]!: string;\n\n  @alerts.Action [AlertActions.addAlert];\n\n  get plotConfigJson() {\n    return JSON.stringify(this.plotConfig, null, 2);\n  }\n\n  set plotConfigJson(newValue: string) {\n    try {\n      this.tempPlotConfig = JSON.parse(newValue);\n      // TODO: Should Validate schema validity (should be PlotConfig type...)\n      this.tempPlotConfigValid = true;\n    } catch (err) {\n      this.tempPlotConfigValid = false;\n    }\n  }\n\n  get subplots(): string[] {\n    // Subplot keys (for selection window)\n    return ['main_plot', ...Object.keys(this.plotConfig.subplots)];\n  }\n\n  get usedColumns(): string[] {\n    if (this.isMainPlot) {\n      return Object.keys(this.plotConfig.main_plot);\n    }\n    if (this.selSubPlot in this.plotConfig.subplots) {\n      return Object.keys(this.plotConfig.subplots[this.selSubPlot]);\n    }\n    return [];\n  }\n\n  get isMainPlot() {\n    return this.selSubPlot === 'main_plot';\n  }\n\n  get currentPlotConfig() {\n    if (this.isMainPlot) {\n      return this.plotConfig.main_plot;\n    }\n\n    return this.plotConfig.subplots[this.selSubPlot];\n  }\n\n  mounted() {\n    console.log('Config Mounted', this.value);\n    this.plotConfig = this.value;\n    this.plotConfigNameLoc = this.plotConfigName;\n  }\n\n  @Watch('value')\n  watchValue() {\n    this.plotConfig = this.value;\n    this.plotConfigNameLoc = this.plotConfigName;\n  }\n\n  addIndicator(newIndicator: Record<string, IndicatorConfig>) {\n    console.log(this.plotConfig);\n\n    const { plotConfig } = this;\n    const name = Object.keys(newIndicator)[0];\n    const indicator = newIndicator[name];\n    if (this.isMainPlot) {\n      console.log(`Adding ${name} to MainPlot`);\n      plotConfig.main_plot[name] = { ...indicator };\n    } else {\n      console.log(`Adding ${name} to ${this.selSubPlot}`);\n      plotConfig.subplots[this.selSubPlot][name] = { ...indicator };\n    }\n\n    this.plotConfig = { ...plotConfig };\n    // Reset random color\n    this.addNewIndicator = false;\n    this.emitPlotConfig();\n  }\n\n  removeIndicator() {\n    console.log(this.plotConfig);\n    const { plotConfig } = this;\n    if (this.isMainPlot) {\n      console.log(`Removing ${this.selIndicatorName} from MainPlot`);\n      delete plotConfig.main_plot[this.selIndicatorName];\n    } else {\n      console.log(`Removing ${this.selIndicatorName} from ${this.selSubPlot}`);\n      delete plotConfig.subplots[this.selSubPlot][this.selIndicatorName];\n    }\n\n    this.plotConfig = { ...plotConfig };\n    console.log(this.plotConfig);\n    this.selIndicatorName = '';\n    this.emitPlotConfig();\n  }\n\n  addSubplot() {\n    this.plotConfig.subplots = {\n      ...this.plotConfig.subplots,\n      [this.newSubplotName]: {},\n    };\n    this.selSubPlot = this.newSubplotName;\n    this.newSubplotName = '';\n\n    console.log(this.plotConfig);\n    this.emitPlotConfig();\n  }\n\n  delSubplot() {\n    delete this.plotConfig.subplots[this.selSubPlot];\n    this.plotConfig.subplots = { ...this.plotConfig.subplots };\n    this.selSubPlot = '';\n  }\n\n  savePlotConfig() {\n    this.saveCustomPlotConfig({ [this.plotConfigName]: this.plotConfig });\n  }\n\n  loadPlotConfig() {\n    this.plotConfig = getCustomPlotConfig(this.plotConfigNameLoc);\n    console.log(this.plotConfig);\n    console.log('loading config');\n    this.emitPlotConfig();\n  }\n\n  loadConfigFromString() {\n    // this.plotConfig = JSON.parse();\n    if (this.tempPlotConfig !== undefined && this.tempPlotConfigValid) {\n      this.plotConfig = this.tempPlotConfig;\n      this.emitPlotConfig();\n    }\n  }\n\n  resetConfig() {\n    this.plotConfig = { ...EMPTY_PLOTCONFIG };\n  }\n\n  async loadPlotConfigFromStrategy() {\n    try {\n      await this.getStrategyPlotConfig();\n      this.plotConfig = this.strategyPlotConfig;\n      this.emitPlotConfig();\n    } catch (data) {\n      //\n      this.addAlert({ message: 'Failed to load Plot configuration from Strategy.' });\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlotConfigurator.vue?vue&type=template&id=2bde330a&scoped=true&\"\nimport script from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlotConfigurator.vue?vue&type=style&index=0&id=2bde330a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bde330a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Getter, namespace } from 'vuex-class';\nimport {\n  Trade,\n  PairHistory,\n  EMPTY_PLOTCONFIG,\n  PlotConfig,\n  PairCandlePayload,\n  PairHistoryPayload,\n} from '@/types';\nimport CandleChart from '@/components/charts/CandleChart.vue';\nimport PlotConfigurator from '@/components/charts/PlotConfigurator.vue';\nimport { getCustomPlotConfig, getPlotConfigName } from '@/shared/storage';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport { SettingsGetters } from '@/store/modules/settings';\n\nconst ftbot = namespace('ftbot');\nconst uiSettingsNs = namespace('uiSettings');\n\n@Component({ components: { CandleChart, PlotConfigurator } })\nexport default class CandleChartContainer extends Vue {\n  @Prop({ required: true }) readonly availablePairs!: string[];\n\n  @Prop({ required: true }) readonly timeframe!: string;\n\n  @Prop({ required: false, default: () => [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: false, default: false }) historicView!: boolean;\n\n  @Prop({ required: false, default: true }) plotConfigModal!: boolean;\n\n  /** Only required if historicView is true */\n  @Prop({ required: false, default: false }) timerange!: string;\n\n  /**\n   * Only required if historicView is true\n   */\n  @Prop({ required: false, default: false }) strategy!: string;\n\n  pair = '';\n\n  plotConfig: PlotConfig = { ...EMPTY_PLOTCONFIG };\n\n  plotConfigName = '';\n\n  showPlotConfig = this.plotConfigModal;\n\n  @Getter getChartTheme!: string;\n\n  @ftbot.Getter [BotStoreGetters.availablePlotConfigNames]!: string[];\n\n  @ftbot.Action setPlotConfigName;\n\n  @ftbot.Getter [BotStoreGetters.candleData]!: PairHistory;\n\n  @ftbot.Getter [BotStoreGetters.history]!: PairHistory;\n\n  @ftbot.Getter [BotStoreGetters.selectedPair]!: string;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairCandles!: (payload: PairCandlePayload) => void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairHistory!: (payload: PairHistoryPayload) => void;\n\n  @uiSettingsNs.Getter [SettingsGetters.timezone]: string;\n\n  get dataset(): PairHistory {\n    if (this.historicView) {\n      return this.history[`${this.pair}__${this.timeframe}`];\n    }\n    return this.candleData[`${this.pair}__${this.timeframe}`];\n  }\n\n  get strategyName() {\n    return this.strategy || this.dataset?.strategy || '';\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasDataset(): boolean {\n    return !!this.dataset;\n  }\n\n  mounted() {\n    if (this.selectedPair) {\n      this.pair = this.selectedPair;\n    } else if (this.availablePairs.length > 0) {\n      [this.pair] = this.availablePairs;\n    }\n    this.plotConfigName = getPlotConfigName();\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n  }\n\n  plotConfigChanged() {\n    console.log('plotConfigChanged');\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n    this.setPlotConfigName(this.plotConfigName);\n  }\n\n  showConfigurator() {\n    if (this.plotConfigModal) {\n      this.$bvModal.show('plotConfiguratorModal');\n    } else {\n      this.showPlotConfig = !this.showPlotConfig;\n    }\n  }\n\n  refresh() {\n    if (this.pair && this.timeframe) {\n      if (this.historicView) {\n        this.getPairHistory({\n          pair: this.pair,\n          timeframe: this.timeframe,\n          timerange: this.timerange,\n          strategy: this.strategy,\n        });\n      } else {\n        this.getPairCandles({ pair: this.pair, timeframe: this.timeframe, limit: 500 });\n      }\n    }\n  }\n\n  @Watch('availablePairs')\n  watchAvailablePairs() {\n    if (!this.availablePairs.find((pair) => pair === this.pair)) {\n      [this.pair] = this.availablePairs;\n      this.refresh();\n    }\n  }\n\n  @Watch(BotStoreGetters.selectedPair)\n  watchSelectedPair() {\n    this.pair = this.selectedPair;\n    this.refresh();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChartContainer.vue?vue&type=template&id=69d6d249&scoped=true&\"\nimport script from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CandleChartContainer.vue?vue&type=style&index=0&id=69d6d249&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69d6d249\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=style&index=0&id=69d6d249&scoped=true&lang=scss&\""],"sourceRoot":""}